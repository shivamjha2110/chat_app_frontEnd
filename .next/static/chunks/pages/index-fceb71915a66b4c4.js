(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(543)}])},543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var s=n(4848),a=n(6540),r=n(9965),l=n.n(r);let c=()=>{let[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(""),[c,i]=(0,a.useState)(null),[d,o]=(0,a.useState)("Disconnected"),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=new WebSocket("https://chat-app-backen-x8ic.onrender.com/ws");return i(e),e.onopen=()=>o("Connected"),e.onclose=()=>o("Disconnected"),e.onmessage=e=>{let n=JSON.parse(e.data);t(e=>[...e,n].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()))},()=>e.close()},[]);let x=()=>{if(!c||c.readyState!==WebSocket.OPEN){console.error("WebSocket is not connected yet!");return}if(n.trim()){let e={user:"Admin",content:n,timestamp:new Date().toISOString()};c.send(JSON.stringify(e)),t(t=>[...t,e]),r("")}};return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-screen w-screen bg-blue-100",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-lg p-4 rounded-xl shadow-lg",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-center",children:"Admin"}),(0,s.jsx)("p",{className:"text-center mb-2 ".concat("Connected"===d?"text-green-500":"text-red-500"),children:d}),(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(l(),{src:"/avatar.png",alt:"User Avatar",width:100,height:100})}),(0,s.jsx)("div",{className:"border w-full h-64 overflow-auto p-2 rounded bg-gray-100",children:e.map((e,t)=>(0,s.jsxs)("p",{className:"p-2 bg-white my-1 rounded shadow",children:[(0,s.jsxs)("strong",{children:[e.user,":"]})," ",e.content,(0,s.jsx)("span",{className:"text-gray-500 text-sm ml-2",children:new Date(e.timestamp).toLocaleTimeString()})]},t))}),(0,s.jsxs)("div",{className:"flex w-full mt-2",children:[(0,s.jsx)("input",{type:"text",className:"flex-1 p-2 border rounded-l",value:n,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&x(),placeholder:"Type a message..."}),(0,s.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded-r",onClick:x,children:"Send"})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,s.jsx)("input",{type:"file",className:"border p-2 rounded",onChange:e=>m(e.target.files?e.target.files[0]:null)}),(0,s.jsx)("button",{className:"p-2 bg-green-500 text-white rounded",onClick:()=>{if(!u)return;let e=new FileReader;e.onload=()=>{if(c&&c.readyState===WebSocket.OPEN){let n={user:"Admin",content:"\uD83D\uDCCE ".concat(u.name),timestamp:new Date().toISOString()};c.send(JSON.stringify({type:"file",name:u.name,data:e.result})),t(e=>[...e,n])}},e.readAsDataURL(u)},children:"Upload \uD83D\uDCCE"})]})]})})};function i(){return(0,s.jsx)("div",{className:"flex h-screen",children:(0,s.jsx)(c,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[965,636,593,792],()=>t(2022)),_N_E=e.O()}]);